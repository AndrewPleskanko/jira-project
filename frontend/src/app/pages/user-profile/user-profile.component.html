<div class="container mt-4">
  <div class="card shadow-sm">
    <div class="card-header d-flex justify-content-between align-items-center bg-light">
      <h2 class="mb-0">Profile</h2>
      <button class="btn btn-outline-primary btn-sm" data-bs-toggle="modal" data-bs-target="#settingsModal">
        <i class="bi bi-gear-fill"></i> Settings
      </button>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-4 text-center">
          <img [src]="user.avatarUrl" alt="User Avatar" class="img-thumbnail rounded-circle mb-3"
               style="width: 200px; height: 200px; object-fit: cover;"/>
          <button class="btn btn-secondary btn-sm w-100" data-bs-toggle="modal" data-bs-target="#avatarModal">Change
            Avatar
          </button>
        </div>
        <div class="col-md-8">
          <ul class="list-group list-group-flush mb-3">
            <li class="list-group-item d-flex align-items-center my-1">
              <span class="fw-bold"><i class="bi bi-person"></i> Username:</span>
              <div class="d-flex align-items-center ms-2">
                <span>{{ user.username }}</span>
              </div>
            </li>
            <li class="list-group-item d-flex align-items-center my-1">
              <span class="fw-bold"><i class="bi bi-envelope me-2"></i> Email:</span>
              <div class="d-flex align-items-center ms-2">
                <span>{{ user.email }}</span>
              </div>
            </li>
            <li class="list-group-item d-flex align-items-center my-1">
              <span class="fw-bold"><i class="bi bi-calendar-date me-2"></i> Age:</span>
              <div class="d-flex align-items-center ms-2">
                <span>{{ user.age }}</span>
              </div>
            </li>
            <li class="list-group-item d-flex align-items-center my-1">
              <span class="fw-bold"><i class="bi bi-telephone me-2"></i> Phone:</span>
              <div class="d-flex align-items-center ms-2">
                <span>{{ user.phone }}</span>
              </div>
            </li>
            <li class="list-group-item d-flex align-items-center my-1">
              <span class="fw-bold"><i class="bi bi-shield-lock me-2"></i> Role:</span>
              <div class="d-flex align-items-center ms-2">
                <span>{{ (user.role?.name || 'Unknown Role') | roleDisplay }}</span>
              </div>
            </li>
          </ul>

          <div class="d-flex gap-2">
            <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#editUserModal">Edit User
            </button>
            <button class="btn btn-danger btn-sm" data-bs-toggle="modal" data-bs-target="#deleteModal">Delete Account
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="editUserModal" tabindex="-1" aria-labelledby="editUserModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="editUserModalLabel">Edit User</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form>
            <div class="mb-3">
              <label for="username" class="form-label">Username</label>
              <input type="text" class="form-control" id="username" [(ngModel)]="user.username" name="username">
            </div>
            <div class="mb-3">
              <label for="email" class="form-label">Email</label>
              <input type="email" class="form-control" id="email" [(ngModel)]="user.email" name="email">
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="button" class="btn btn-primary" (click)="saveUserChanges()">Save changes</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="deleteModal" tabindex="-1" aria-labelledby="deleteModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="deleteModalLabel">Confirm Delete</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          Are you sure you want to delete this user?
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-danger" (click)="deleteUser()">Delete</button>
        </div>
      </div>
    </div>
  </div>
</div>
